# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰èª¿æŸ»ã‚µãƒãƒªãƒ¼

> è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ: `docs/design/test-code-analysis-2025-11-16.md`

## ğŸ¯ èª¿æŸ»ã®ç›®çš„

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ã—ã€ä»¥ä¸‹ã‚’èª¿æŸ»:
- APIãƒªã‚¯ã‚¨ã‚¹ãƒˆé–¢é€£ã®ãƒ†ã‚¹ãƒˆã®ç‰¹å®š
- æ„å‘³ã®ãªã„ãƒ†ã‚¹ãƒˆã‚„çµ±ä¸€æ„Ÿã®ãªã„éƒ¨åˆ†ã®ç™ºè¦‹
- æ”¹å–„ææ¡ˆã®ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—

## ğŸ“Š ç¾çŠ¶

### ãƒ†ã‚¹ãƒˆçµ±è¨ˆ
- âœ… **ç·ãƒ†ã‚¹ãƒˆæ•°**: 163ãƒ†ã‚¹ãƒˆ
- âœ… **åˆæ ¼ç‡**: 100%
- ğŸ“ **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 18ãƒ•ã‚¡ã‚¤ãƒ«

### APIãƒ†ã‚¹ãƒˆã®çŠ¶æ³

| Feature | APIé–¢æ•°ãƒ†ã‚¹ãƒˆ | React Queryãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ | ãƒ†ã‚¹ãƒˆæ–¹å¼ |
|---------|--------------|----------------------|----------|
| **bookmarks** | âœ… å®Œå‚™ (6é–¢æ•°) | âŒ **ä¸è¶³** (0/4) | å°‚ç”¨ãƒ•ã‚¡ã‚¤ãƒ« |
| **labels** | âœ… å®Œå‚™ (5é–¢æ•°) | âœ… å®Œå‚™ (2ãƒ•ãƒƒã‚¯) | import.meta.vitest |

## ğŸ”´ æœ€å„ªå…ˆã§å¯¾å¿œã™ã¹ãå•é¡Œ

### 1. React Queryãƒ•ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆä¸è¶³ï¼ˆbookmarksï¼‰

**å½±éŸ¿**: æ¥½è¦³çš„æ›´æ–°ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡é›‘ã§ãƒã‚°ãƒªã‚¹ã‚¯ãŒé«˜ã„

**ãƒ†ã‚¹ãƒˆä¸è¶³ã®ãƒ•ã‚¡ã‚¤ãƒ«**:
```
features/bookmarks/queries/
â”œâ”€â”€ useGetRecentBookmarks.ts        âŒ ãƒ†ã‚¹ãƒˆãªã—
â”œâ”€â”€ useMarkBookmarkAsRead.ts        âŒ ãƒ†ã‚¹ãƒˆãªã—ï¼ˆæ¥½è¦³çš„æ›´æ–°ï¼‰
â”œâ”€â”€ useMarkBookmarkAsUnread.ts      âŒ ãƒ†ã‚¹ãƒˆãªã—ï¼ˆæ¥½è¦³çš„æ›´æ–°ï¼‰
â””â”€â”€ useToggleFavoriteBookmark.ts    âŒ ãƒ†ã‚¹ãƒˆãªã—ï¼ˆè¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ï¼‰
```

**å‚è€ƒå®Ÿè£…**: `features/labels/hooks/useManageLabels.test.tsx`

### 2. ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸çµ±ä¸€

**å•é¡Œ**: åŒã˜APIé–¢æ•°ã®ãƒ†ã‚¹ãƒˆã§ç•°ãªã‚‹æ‰‹æ³•ã‚’ä½¿ç”¨

```
bookmarks/queries/api.test.ts    â† å°‚ç”¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
labels/queries/api.ts            â† import.meta.vitestï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å†…ï¼‰
```

**æ¨å¥¨**: å°‚ç”¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ–¹å¼ã«çµ±ä¸€

### 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã§ã®ãƒ•ãƒƒã‚¯ãƒ¢ãƒƒã‚¯éå¤š

**å•é¡Œ**: `BookmarkCard.test.tsx`ã§React Queryãƒ•ãƒƒã‚¯ã‚’å®Œå…¨ã«ãƒ¢ãƒƒã‚¯

```typescript
// ç¾åœ¨: ãƒ•ãƒƒã‚¯ã‚’å®Œå…¨ãƒ¢ãƒƒã‚¯ â†’ çµ±åˆãƒ†ã‚¹ãƒˆã¨ã—ã¦ã®ä¾¡å€¤ãŒä½ã„
vi.mock("../queries/useToggleFavoriteBookmark", () => ({
  useToggleFavoriteBookmark: () => ({ mutate: vi.fn(), isPending: false }),
}));
```

**æ¨å¥¨**: MSWã§APIã‚’ãƒ¢ãƒƒã‚¯ã€ãƒ•ãƒƒã‚¯ã¯å®Ÿéš›ã«å‹•ã‹ã™

## ğŸŸ¡ ãã®ä»–ã®å•é¡Œ

- **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®éåº¦ãªä½¿ç”¨** - `Button.test.tsx`ç­‰
- **ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡å®šç¾©** - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãŒæ•£åœ¨
- **ãƒ†ã‚¹ãƒˆèª¬æ˜ã®æ—¥æœ¬èª/è‹±èªæ··åœ¨**

## âœ… è‰¯ã„ç‚¹

- âœ… APIå±¤ã®ãƒ†ã‚¹ãƒˆãŒå……å®Ÿï¼ˆæ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®ãŒé©åˆ‡
- âœ… QueryClientã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒé©åˆ‡
- âœ… ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚‚è€ƒæ…®

## ğŸ“‹ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³

### Phase 1: ç·Šæ€¥å¯¾å¿œï¼ˆä»Šã™ãï¼‰

```bash
# 1. React Queryãƒ•ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆæœ€å„ªå…ˆï¼‰
[ ] features/bookmarks/queries/useMarkBookmarkAsRead.test.tsx
[ ] features/bookmarks/queries/useToggleFavoriteBookmark.test.tsx  
[ ] features/bookmarks/queries/useMarkBookmarkAsUnread.test.tsx
[ ] features/bookmarks/queries/useGetRecentBookmarks.test.tsx

# 2. ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®çµ±ä¸€
[ ] labels/queries/api.test.ts ä½œæˆ
[ ] labels/queries/api.ts ã‹ã‚‰ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ç§»å‹•
```

### Phase 2: å“è³ªå‘ä¸Š

```bash
[ ] ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ•´å‚™ï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¯ãƒˆãƒªï¼‰
[ ] MSWå°å…¥æ¤œè¨
[ ] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆè¦‹ç›´ã—
```

### Phase 3: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
[ ] ãƒ†ã‚¹ãƒˆèª¬æ˜ã®æ—¥æœ¬èªçµ±ä¸€
[ ] test/it ã®çµ±ä¸€
```

## ğŸ“Š ãƒªã‚¹ã‚¯è©•ä¾¡

| å•é¡Œ | ãƒªã‚¹ã‚¯ | å½±éŸ¿ç¯„å›² |
|------|--------|---------|
| React Queryãƒ•ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆä¸è¶³ | ğŸ”´ é«˜ | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ©Ÿèƒ½å…¨èˆ¬ |
| ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸çµ±ä¸€ | ğŸŸ¡ ä¸­ | é–‹ç™ºé€Ÿåº¦ãƒ»ä¿å®ˆæ€§ |
| ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆéå¤š | ğŸŸ¡ ä¸­ | CI/CDåŠ¹ç‡ |

## ğŸ”— è©³ç´°æƒ…å ±

å®Œå…¨ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆ: [`docs/design/test-code-analysis-2025-11-16.md`](./docs/design/test-code-analysis-2025-11-16.md)

---

**èª¿æŸ»æ—¥**: 2025-11-16  
**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒ**: Vitest 4.0.6
