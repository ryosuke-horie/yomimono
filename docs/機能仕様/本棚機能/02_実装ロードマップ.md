# 本棚機能実装ロードマップ

## 実装優先順位と見積もり

### 🎯 Phase 1: MVP実装（1週間）

#### データベース基盤とAPI
- [ ] マイグレーションファイル作成
  - `books`テーブルのみ
- [ ] Drizzle ORMスキーマ定義
- [ ] Repository層実装
  - `BookRepository`

- [ ] 基本CRUD APIエンドポイント
  - `POST /api/bookshelf` - 本の追加
  - `GET /api/bookshelf` - 一覧取得
  - `GET /api/bookshelf/:id` - 詳細取得
  - `PUT /api/bookshelf/:id` - 更新
  - `DELETE /api/bookshelf/:id` - 削除
  - `PATCH /api/bookshelf/:id/status` - ステータス更新
- [ ] バリデーション実装
- [ ] エラーハンドリング

#### UI実装
- [ ] 本棚一覧ページ
  - グリッドビュー
  - ステータスタブ（未読・読書中・読了）
- [ ] 本の追加フォーム
- [ ] 本の詳細ページ

### 🔗 Phase 2: 外部API連携（オプション）

#### Google Books API連携
- [ ] タイトルから表紙画像取得
- [ ] APIキー設定
- [ ] キャッシュ実装

#### GitHub API連携  
- [ ] リポジトリ情報取得
- [ ] OGP画像取得

## 技術スタック詳細

### バックエンド
```typescript
// 使用技術
- Hono (APIフレームワーク)
- Drizzle ORM
- Cloudflare D1 (データベース)
- Zod (バリデーション)

// ディレクトリ構造
api/
├── src/
│   ├── routes/
│   │   └── bookshelf.ts
│   ├── services/
│   │   └── BookshelfService.ts
│   ├── repositories/
│   │   └── BookRepository.ts
│   └── db/
│       └── schema/
│           └── bookshelf.ts
```

### フロントエンド
```typescript
// 使用技術
- Next.js 14 (App Router)
- TailwindCSS
- Tanstack Query
- Zustand (状態管理)

// ディレクトリ構造
frontend/
├── app/
│   └── bookshelf/
│       ├── page.tsx
│       └── [id]/
│           └── page.tsx
├── features/
│   └── bookshelf/
│       ├── components/
│       │   ├── BookCard.tsx
│       │   ├── BookGrid.tsx
│       │   └── BookForm.tsx
│       ├── hooks/
│       │   └── useBooks.ts
│       └── types/
│           └── book.ts
```

## 開発環境セットアップ

### 1. データベースマイグレーション
```bash
# 開発環境
cd api
npx drizzle-kit generate  # マイグレーションファイル生成
npm run migrate:development  # 開発環境に適用

# 本番環境
npm run migrate:production
```

### 2. 環境変数設定
```env
# 外部API（オプション）
GOOGLE_BOOKS_API_KEY=xxx  # Google Books API用
GITHUB_API_TOKEN=xxx      # GitHub API用
```

## テスト戦略

### ユニットテスト
- Repository層: データベース操作の正確性
- Service層: ビジネスロジックの妥当性
- API層: エンドポイントの動作確認

### E2Eテスト
- 本の追加から読了までのフロー
- ステータス変更の動作確認

## シンプルな実装方針

### データベース
- シンプルなテーブル構造（booksテーブルのみ）
- 個人利用のためパフォーマンス要件は考慮しない

### フロントエンド  
- シンプルなUI（ステータスタブのみ）
- 画像の遅延読み込み
- キャッシュ戦略（Tanstack Query）


## リリース計画

### Phase 1リリース（MVP）
- 基本的な本棚機能
- ステータス管理（未読・読書中・読了）
- シンプルなUI

### Phase 2リリース（オプション）
- 外部API連携
- 表紙画像自動取得



## 次のステップ

1. **開発開始**: Phase 1の実装着手
2. **技術検証**: Google Books API連携のPOC作成（オプション）